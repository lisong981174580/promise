<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>MyPromise</title>
</head>
<body>
  <script src="./promise.js" type="text/javascript"></script>
  <script type="text/javascript">
    // 测试代码
    function loadImag(src) {
      return new MyPromise(function (resolve, reject) {
        let img = document.createElement('img');

        img.onload = function () {
          resolve(img);
        };

        img.onerror = function () {
          reject(img);
        };

        img.src = src;
      });
    }

    const getImg = loadImag('https://gw.alipayobjects.com/zos/rmsportal/XuVpGqBFxXplzvLjJBZB.svg');

    getImg.then(function(img) {
      console.log(img);

      return img.width;
    }).then(function(img) {
      console.log(img);
    }).catch(function(error) {
      console.log(error);
    })
  </script>
</body>
</html>